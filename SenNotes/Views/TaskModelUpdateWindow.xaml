<Window x:Class="SenNotes.Views.TaskModelUpdateWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:local="clr-namespace:SenNotes.Views"
        mc:Ignorable="d"
        xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:vm="clr-namespace:SenNotes.ViewModels"
        xmlns:converter="clr-namespace:SenNotes.Converter"
        xmlns:components="clr-namespace:SenNotes.Components"
        Title="TaskModelUpdateWindow" Height="300" Width="450">
  <Window.Resources>
    <converter:TaskStatusToBrushConverter x:Key="StatusToColorConverter" />
    <converter:DateTimeConverter x:Key="DateTimeConverter" />
    <Style TargetType="md:PackIcon">
      <Setter Property="Foreground"
              Value="White" />
    </Style>
    <Style TargetType="TextBlock">
      <Setter Property="Foreground"
              Value="White" />
    </Style>
    <Style x:Key="CleanTextBoxStyle" TargetType="TextBox">
      <Setter Property="Background" Value="Transparent" />
      <Setter Property="BorderThickness" Value="0" />
      <Setter Property="Foreground" Value="White" />
      <Setter Property="CaretBrush" Value="White" />
      <Setter Property="FontWeight" Value="ExtraBold" />
      <Setter Property="FontSize" Value="15" />
      <Setter Property="FocusVisualStyle" Value="{x:Null}" />
    </Style>
  </Window.Resources>
  <Grid Background="{Binding TaskModel.Status
  ,Converter={StaticResource StatusToColorConverter}}">
    <Grid>
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
        <RowDefinition Height="Auto" />
      </Grid.RowDefinitions>
      <DockPanel LastChildFill="False">
        <Button DockPanel.Dock="Right"
                Style="{StaticResource MaterialDesignFlatButton}"
                Click="ButtonBase_OnClick">
          <md:PackIcon Kind="WindowClose" />
        </Button>
      </DockPanel>
      <StackPanel Grid.Row="1" Margin="10">
        <Border
          Grid.Row="1">
          <Grid>
            <Grid.RowDefinitions>
              <RowDefinition Height="*" />
              <RowDefinition Height="Auto" />
              <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <StackPanel>
              <TextBox Text="{Binding TaskModel.TaskTitle}"
                       Style="{StaticResource CleanTextBoxStyle}"
                       FontSize="20"
                       TextWrapping="Wrap" />
              <Border BorderBrush="White" BorderThickness="1" Opacity="0.3" />
              <TextBox Text="{Binding TaskModel.TaskDetail}"
                       Style="{StaticResource CleanTextBoxStyle}"
                       Margin="0,10"
                       TextWrapping="Wrap" />
            </StackPanel>
          </Grid>
        </Border>
        <Grid>
          <StackPanel VerticalAlignment="Center">
            <DockPanel LastChildFill="False">
              <TextBox
                Style="{StaticResource CleanTextBoxStyle}"
                Text="{Binding TaskModel.StartTime,Converter={StaticResource DateTimeConverter}}" />
              <TextBox
                Style="{StaticResource CleanTextBoxStyle}"
                Text="{Binding TaskModel.EndTime,Converter={StaticResource DateTimeConverter}}"
                DockPanel.Dock="Right" />
            </DockPanel>
            <ProgressBar
              Margin="0,5"
              Background="Transparent"
              BorderBrush="Transparent"
              Foreground="White"
              Value="{Binding TaskModel.Progress,Mode=OneWay}" />
          </StackPanel>
        </Grid>
      </StackPanel>
      <DockPanel Grid.Row="2" LastChildFill="False">
        <Button DockPanel.Dock="Right"
                Style="{StaticResource MaterialDesignFlatButton}"
                Command="{Binding UpdateTaskModelCommand}">
          <md:PackIcon Kind="Check" Foreground="White"/>
        </Button>
      </DockPanel>
    </Grid>
  </Grid>
</Window>